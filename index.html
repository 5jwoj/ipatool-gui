<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IPATool GUI</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="app-container">
    <!-- 侧边栏 -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="app-logo">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
            <rect width="32" height="32" rx="8" fill="url(#gradient)" />
            <path d="M16 8L20 12H12L16 8Z" fill="white" opacity="0.9" />
            <rect x="14" y="12" width="4" height="12" rx="1" fill="white" opacity="0.9" />
            <path d="M10 20L14 24H18L22 20H10Z" fill="white" opacity="0.9" />
            <defs>
              <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
                <stop offset="0%" stop-color="#667eea" />
                <stop offset="100%" stop-color="#764ba2" />
              </linearGradient>
            </defs>
          </svg>
          <span class="app-title">IPATool</span>
        </div>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-item active" data-view="auth">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path
              d="M10 2C7.24 2 5 4.24 5 7v2H4c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2h-1V7c0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3v2H7V7c0-1.66 1.34-3 3-3z" />
          </svg>
          <span>认证</span>
        </button>

        <button class="nav-item" data-view="search">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path
              d="M8 2C4.69 2 2 4.69 2 8s2.69 6 6 6c1.16 0 2.24-.34 3.15-.92l4.88 4.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41l-4.88-4.88C13.66 10.24 14 9.16 14 8c0-3.31-2.69-6-6-6zm0 2c2.21 0 4 1.79 4 4s-1.79 4-4 4-4-1.79-4-4 1.79-4 4-4z" />
          </svg>
          <span>搜索</span>
        </button>

        <button class="nav-item" data-view="download">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path
              d="M10 2c-.55 0-1 .45-1 1v8.59l-2.29-2.3c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4 4c.39.39 1.02.39 1.41 0l4-4c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L11 11.59V3c0-.55-.45-1-1-1zM4 15c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1H4z" />
          </svg>
          <span>下载</span>
        </button>

        <button class="nav-item" data-view="settings">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path
              d="M17.43 10.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C12.46 2.18 12.25 2 12 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM10 13c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z" />
          </svg>
          <span>设置</span>
        </button>
      </nav>

      <div class="sidebar-footer">
        <div class="status-indicator">
          <div class="status-dot" id="ipatoolStatus"></div>
          <span class="status-text" id="ipatoolStatusText">检查中...</span>
        </div>
      </div>
    </aside>

    <!-- 主内容区 -->
    <main class="main-content">
      <!-- 认证视图 -->
      <div class="view active" id="authView">
        <div class="view-header">
          <h1>账户认证</h1>
          <p class="view-description">使用 Apple ID 登录以访问 App Store</p>
        </div>

        <div class="content-card" id="authCard">
          <div class="auth-form" id="loginForm">
            <div class="form-group">
              <label for="email">Apple ID</label>
              <input type="email" id="email" placeholder="your@email.com" autocomplete="email">
            </div>

            <div class="form-group">
              <label for="password">密码</label>
              <input type="password" id="password" placeholder="••••••••" autocomplete="current-password">
            </div>

            <div class="form-group hidden" id="authCodeGroup">
              <label for="authCode">双因素认证码</label>
              <input type="text" id="authCode" placeholder="输入 6 位验证码" maxlength="6" pattern="[0-9]{6}">
              <small>请输入发送到您信任设备的 6 位验证码</small>
            </div>

            <div class="alert alert-info">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 1C4.13 1 1 4.13 1 8s3.13 7 7 7 7-3.13 7-7-3.13-7-7-7zm1 11H7V7h2v5zm0-6H7V4h2v2z" />
              </svg>
              <span>您的凭据仅用于与 Apple 服务器通信,不会被存储或发送到其他地方。</span>
            </div>

            <button class="btn btn-primary" id="loginBtn">
              <span>登录</span>
            </button>
          </div>

          <div class="auth-info hidden" id="authInfo">
            <div class="account-card">
              <div class="account-avatar">
                <svg width="48" height="48" viewBox="0 0 48 48" fill="currentColor">
                  <circle cx="24" cy="24" r="24" fill="url(#avatarGradient)" />
                  <path
                    d="M24 24c3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6 2.69 6 6 6zm0 3c-4.42 0-13 2.21-13 6.6V36h26v-2.4c0-4.39-8.58-6.6-13-6.6z"
                    fill="white" />
                  <defs>
                    <linearGradient id="avatarGradient" x1="0" y1="0" x2="48" y2="48">
                      <stop offset="0%" stop-color="#667eea" />
                      <stop offset="100%" stop-color="#764ba2" />
                    </linearGradient>
                  </defs>
                </svg>
              </div>
              <div class="account-details">
                <h3 id="accountEmail">-</h3>
                <p id="accountName">-</p>
              </div>
            </div>

            <button class="btn btn-secondary" id="logoutBtn">
              <span>登出</span>
            </button>
          </div>
        </div>
      </div>

      <!-- 搜索视图 -->
      <div class="view" id="searchView">
        <div class="view-header">
          <h1>搜索应用</h1>
          <p class="view-description">在 App Store 中搜索 iOS 应用</p>
        </div>

        <div class="search-bar">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path
              d="M8 2C4.69 2 2 4.69 2 8s2.69 6 6 6c1.16 0 2.24-.34 3.15-.92l4.88 4.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41l-4.88-4.88C13.66 10.24 14 9.16 14 8c0-3.31-2.69-6-6-6zm0 2c2.21 0 4 1.79 4 4s-1.79 4-4 4-4-1.79-4-4 1.79-4 4-4z" />
          </svg>
          <input type="text" id="searchInput" placeholder="输入应用名称..." autocomplete="off">
          <input type="number" id="searchLimit" value="10" min="1" max="50" title="结果数量">
          <button class="btn btn-primary" id="searchBtn">搜索</button>
        </div>

        <div class="search-results" id="searchResults">
          <div class="empty-state">
            <svg width="64" height="64" viewBox="0 0 64 64" fill="currentColor" opacity="0.3">
              <path
                d="M26 8C16.06 8 8 16.06 8 26s8.06 18 18 18c3.48 0 6.72-1.02 9.45-2.76l14.65 14.65c1.17 1.17 3.07 1.17 4.24 0 1.17-1.17 1.17-3.07 0-4.24L39.69 37c1.74-2.73 2.76-5.97 2.76-9.45C42.45 16.06 34.39 8 26 8zm0 6c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12 5.37-12 12-12z" />
            </svg>
            <p>输入关键词开始搜索</p>
          </div>
        </div>
      </div>

      <!-- 下载视图 -->
      <div class="view" id="downloadView">
        <div class="view-header">
          <h1>下载应用</h1>
          <p class="view-description">下载 iOS 应用的 IPA 文件</p>
        </div>

        <div class="content-card">
          <div class="form-group">
            <label for="bundleId">Bundle ID</label>
            <input type="text" id="bundleId" placeholder="com.example.app">
            <small>或从搜索结果中选择应用</small>
          </div>

          <div class="form-group">
            <label for="downloadPath">保存位置</label>
            <div class="input-group">
              <input type="text" id="downloadPath" placeholder="选择保存位置" readonly>
              <button class="btn btn-secondary" id="selectPathBtn">选择</button>
            </div>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="autoPurchase">
              <span>自动获取许可(如需要)</span>
            </label>
          </div>

          <div class="form-group">
            <label for="versionSelect">版本</label>
            <select id="versionSelect" disabled>
              <option value="">最新版本</option>
            </select>
            <button class="btn btn-secondary btn-sm" id="loadVersionsBtn">加载版本列表</button>
          </div>

          <button class="btn btn-primary btn-lg" id="downloadBtn">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path
                d="M10 2c-.55 0-1 .45-1 1v8.59l-2.29-2.3c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4 4c.39.39 1.02.39 1.41 0l4-4c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L11 11.59V3c0-.55-.45-1-1-1zM4 15c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1H4z" />
            </svg>
            <span>开始下载</span>
          </button>
        </div>

        <div class="download-progress hidden" id="downloadProgress">
          <div class="progress-header">
            <h3>下载中...</h3>
            <p id="downloadStatus">正在准备下载</p>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
          </div>
        </div>
      </div>

      <!-- 设置视图 -->
      <div class="view" id="settingsView">
        <div class="view-header">
          <h1>设置</h1>
          <p class="view-description">配置应用偏好</p>
        </div>

        <div class="content-card">
          <div class="settings-section">
            <h3>外观</h3>
            <div class="form-group">
              <label for="themeSelect">主题</label>
              <select id="themeSelect">
                <option value="dark">深色</option>
                <option value="light">浅色</option>
              </select>
            </div>
          </div>

          <div class="settings-section">
            <h3>下载</h3>
            <div class="form-group">
              <label for="defaultDownloadPath">默认下载路径</label>
              <div class="input-group">
                <input type="text" id="defaultDownloadPath" readonly>
                <button class="btn btn-secondary" id="selectDefaultPathBtn">选择</button>
              </div>
            </div>
          </div>

          <div class="settings-section">
            <h3>高级</h3>
            <div class="form-group">
              <label for="ipatoolPath">ipatool 路径</label>
              <input type="text" id="ipatoolPath" placeholder="ipatool">
              <small>留空使用系统 PATH 中的 ipatool</small>
            </div>
          </div>

          <button class="btn btn-primary" id="saveSettingsBtn">保存设置</button>
        </div>

        <div class="content-card">
          <h3>关于</h3>
          <p>IPATool GUI v1.0.0</p>
          <p>基于 <a href="#" id="ipatoolLink">ipatool</a> 的图形界面工具</p>
          <p style="margin-top: 1rem; opacity: 0.6;">使用 Electron 构建</p>
        </div>
      </div>
    </main>
  </div>

  <!-- Toast 通知 -->
  <div class="toast-container" id="toastContainer"></div>

  <script src="renderer.js"></script>
</body>

</html>